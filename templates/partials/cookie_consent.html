{% if not request.COOKIES.user_consent %}
<section 
    aria-label="Cookie Consent Banner"
    role="region"
    x-data="cookieConsent"
    x-show="showBanner"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 transform translate-y-4"
    x-transition:enter-end="opacity-100 transform translate-y-0"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="opacity-100 transform translate-y-0"
    x-transition:leave-end="opacity-0 transform translate-y-4"
    class="fixed bottom-4 right-4 z-50 w-full max-w-md p-1 font-mono text-white select-none sm:right-4 sm:bottom-4"
    x-cloak
>
    <!-- RPG Box Container -->
    <div class="relative bg-blue-900 border-4 border-white shadow-[0_0_0_4px_#000000] p-4 rounded-sm">
        
        <!-- Header / Title -->
        <div class="mb-2 flex items-center border-b-2 border-white pb-2">
            <span class="mr-2 text-2xl">üßô‚Äç‚ôÇÔ∏è</span>
            <h3 class="text-lg font-bold uppercase tracking-widest text-yellow-400 drop-shadow-md">System Message</h3>
        </div>

        <!-- Content -->
        <div class="mb-4 space-y-2 text-sm leading-relaxed">
            <p>
                <span class="text-blue-300">></span> The realm requires <span class="text-yellow-200">Cookies</span> to function properly.
            </p>
            <p>
                <span class="text-blue-300">></span> Accepting grants <span class="text-green-300">XP (Analytics)</span> and <span class="text-green-300">Loot (Preferences)</span>.
            </p>
        </div>

        <!-- Actions (RPG Menu Style) -->
        <div class="flex flex-col space-y-2 border-t-2 border-white pt-2">
            <button 
                @click="accept"
                hx-post="{% url 'core:set_cookie_consent' %}"
                hx-vals='{"consent_value": "accepted"}'
                hx-swap="none"
                class="group flex items-center space-x-2 px-2 py-1 hover:bg-blue-800 focus:outline-none"
            >
                <span class="invisible text-yellow-400 group-hover:visible">‚ñ∂</span>
                <span class="font-bold group-hover:text-yellow-400">ACCEPT QUEST</span>
            </button>
            
            <button 
                @click="reject"
                hx-post="{% url 'core:set_cookie_consent' %}"
                hx-vals='{"consent_value": "rejected"}'
                hx-swap="none"
                class="group flex items-center space-x-2 px-2 py-1 hover:bg-blue-800 focus:outline-none"
            >
                <span class="invisible text-red-400 group-hover:visible">‚ñ∂</span>
                <span class="font-bold group-hover:text-red-400">DECLINE (Hard Mode)</span>
            </button>

            <a href="{% url 'core:privacy_policy' %}" class="group flex items-center space-x-2 px-2 py-1 hover:bg-blue-800 focus:outline-none text-xs text-gray-400 mt-2">
                <span class="invisible text-gray-200 group-hover:visible">‚ñ∂</span>
                <span class="group-hover:text-gray-200">Read The Scrolls (Privacy Policy)</span>
            </a>
        </div>
    </div>
</section>
{% endif %}
