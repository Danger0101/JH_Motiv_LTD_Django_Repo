{% extends 'base.html' %}
{% load static %}

{% block title %}About JH Motiv LTD{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-10">
        <h1 class="text-4xl font-extrabold text-gray-900 sm:text-5xl">
            The JH Motiv Movement
        </h1>
    </div>

    <div x-data="{ activeTab: 'about_us' }" class="mt-12">
        <div class="flex flex-wrap justify-center border-b border-gray-200" role="tablist" aria-label="About Sections">
            
            {# Loop through all static tabs (Our Story, Mission, How We Do It, Meet the Team) #}
            {% for key, tab in about_data.tabs.items %}
            <button 
                @click="activeTab = '{{ key }}'"
                :class="{ 'border-blue-500 text-blue-600': activeTab === '{{ key }}', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== '{{ key }}' }"
                class="py-3 px-4 text-center border-b-2 font-medium text-base focus:outline-none transition duration-150 ease-in-out"
                role="tab"
                aria-controls="{{ key }}-panel"
                :aria-selected="activeTab === '{{ key }}'"
            >
                {{ tab.title }}
            </button>
            {% endfor %}

            <button 
                @click="activeTab = 'dreamers'"
                :class="{ 'border-blue-500 text-blue-600': activeTab === 'dreamers', 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300': activeTab !== 'dreamers' }"
                class="py-3 px-4 text-center border-b-2 font-medium text-base focus:outline-none transition duration-150 ease-in-out"
                role="tab"
                aria-controls="dreamers-panel"
                :aria-selected="activeTab === 'dreamers'"
            >
                Wall of Dreamers ðŸ’«
            </button>
        </div>

        <div class="mt-8">

            {% for key, tab in about_data.tabs.items %}
            <div x-show="activeTab === '{{ key }}'" role="tabpanel" id="{{ key }}-panel" aria-labelledby="{{ key }}-tab" class="prose max-w-none lg:prose-lg mx-auto">
                <h2 class="text-3xl font-bold mb-6">{{ tab.heading }}</h2>
                
                {% for item in tab.content %}
                    {% if item.type == 'p' %}
                        <p class="text-lg leading-relaxed">{{ item.body|safe }}</p>
                    {% elif item.type == 'list' %}
                        <ul class="list-disc list-inside space-y-2">
                            {% for li in item.items %}
                                <li>{{ li|safe }}</li>
                            {% endfor %}
                        </ul>
                    {% elif item.type == 'tag' %}
                        <p class="text-xl font-semibold mt-8">{{ item.body|safe }}</p>
                    {% endif %}
                {% endfor %}
            </div>
            {% endfor %}

            <div x-show="activeTab === 'dreamers'" role="tabpanel" id="dreamers-panel" aria-labelledby="dreamers-tab" x-cloak>
                <div class="prose max-w-none lg:prose-lg mx-auto">
                    <h2 class="text-3xl font-bold mb-6">{{ about_data.dreamers.title }}</h2>
                    <p class="text-lg leading-relaxed mb-8">{{ about_data.dreamers.intro }}</p>

                    <ul role="list" class="space-y-6">
                        {# Loop through the dynamic QuerySet fetched from the database #}
                        {% for dreamer in dreamer_profiles %}
                        <li class="p-4 border rounded-lg flex items-center justify-between">
                            <div>
                                <span class="text-xl font-medium text-gray-900">{{ dreamer.name }}</span>
                                {% if dreamer.story_excerpt %}
                                    <p class="text-sm text-gray-600 mt-1">{{ dreamer.story_excerpt }}</p>
                                {% endif %}
                            </div>
                            <div class="flex space-x-3 ml-4 flex-shrink-0">
                                {# Loop through the related channel links #}
                                {% for channel in dreamer.channels.all %}
                                    {% comment %} 
                                        NOTE: Full SVG code should be placed here. Using channel.channel_type to select the icon. 
                                        The anchor tag ensures accessibility and correct link rendering.
                                    {% endcomment %}
                                    <a href="{{ channel.url }}" target="_blank" aria-label="{{ channel.get_channel_type_display }} for {{ dreamer.name }}" class="text-gray-500 hover:text-blue-600 transition duration-150">
                                        {% with type=channel.channel_type %}
                                        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor">
                                            {% if type == 'tiktok' %}
                                                <title>TikTok</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm5.176 8.008a3.176 3.176 0 0 1-5.12 3.864v.016a5.056 5.056 0 0 0 3.056 4.752c-.672.064-1.376.112-2.096.112-2.736 0-5.184-1.28-6.496-3.232a8.624 8.624 0 0 0 .176 6.336c1.136 1.488 2.896 2.592 4.96 3.04V15.04a2.96 2.96 0 0 1-2.944-2.96c0-.016.016-.032.016-.048a1.008 1.008 0 0 0-1.008-.96 1.008 1.008 0 0 0-1.008.96c0 .016.016.032.016.048a4.96 4.96 0 0 0 4.928 4.96c.016 0 .032 0 .048 0a5.056 5.056 0 0 0 5.056-5.056V8.008z"/>
                                            {% elif type == 'instagram' %}
                                                <title>Instagram</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm-1.87 2.146c-2.316 0-3.328.008-4.502.064C4.654 2.26 4.39 2.378 4.195 2.573c-.195.195-.313.46-.379.748-.057 1.174-.064 2.186-.064 4.502v4.754c0 2.316.008 3.328.064 4.502.066.288.184.552.379.747.195.195.46.313.748.379 1.174.057 2.186.064 4.502.064h4.754c2.316 0 3.328-.008 4.502-.064.288-.066.552-.184.747-.379.195-.195.313-.46.379-.748.057-1.174.064-2.186.064-4.502V7.48c0-2.316-.008-3.328-.064-4.502-.066-.288-.184-.552-.379-.747-.195-.195-.46-.313-.748-.379-1.174-.057-2.186-.064-4.502-.064H7.48zm.86 3.654a4.996 4.996 0 1 1 0 9.992 4.996 4.996 0 0 1 0-9.992zm-.006 8.196a3.2 3.2 0 1 0 0-6.4 3.2 3.2 0 0 0 0 6.4zm5.55-7.794a1.18 1.18 0 1 1 0 2.36 1.18 1.18 0 0 1 0-2.36z"/>
                                            {% elif type == 'youtube' %}
                                                <title>YouTube</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm6.983 7.846a2.768 2.768 0 0 0-1.957-1.957c-1.554-.424-7.783-.424-9.337 0a2.768 2.768 0 0 0-1.957 1.957c-.424 1.554-.424 7.783 0 9.337a2.768 2.768 0 0 0 1.957 1.957c1.554.424 7.783.424 9.337 0a2.768 2.768 0 0 0 1.957-1.957c.424-1.554.424-7.783 0-9.337zm-8.86 2.394l3.123 1.768-3.123 1.768V10.24z"/>
                                            {% elif type == 'spotify' %}
                                                <title>Spotify</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm4.272 17.512c-2.48.512-4.992.512-7.488 0-1.072-.224-1.072-1.632 0-1.856 2.288-.48 4.592-.48 6.896 0 .688.144.688 1.28 0 1.472zm2.08-3.232c-2.944.64-5.92.64-8.864 0-1.296-.288-1.296-2.112 0-2.432 2.688.592 5.408.592 8.096 0 1.296-.288 1.296 1.84 0 2.24zm2.144-3.616c-3.488.768-7.008.768-10.496 0-1.568-.352-1.568-2.528 0-2.88 3.328.736 6.704.736 10.032 0 1.568-.352 1.568 2.528 0 2.88z"/>
                                            {% elif type == 'facebook' %}
                                                <title>Facebook</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm3 8h-2c-.6 0-1 .4-1 1v2h3l-.387 3H12v7H9v-7H7v-3h2V9c0-1.6 1.4-3 3-3h3v2z"/>
                                            {% elif type == 'linkedin' %}
                                                <title>LinkedIn</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm-3 18h-3V9h3v9zm-1.5-10.5c-.828 0-1.5-.672-1.5-1.5s.672-1.5 1.5-1.5 1.5.672 1.5 1.5-.672 1.5-1.5 1.5zm9 10.5h-3v-5c0-1.2-.8-2-2-2s-2 .8-2 2v5h-3v-9h3v1.3c.7-1 1.7-1.3 2.7-1.3 2.5 0 4.3 1.8 4.3 5v5z"/>
                                            {% elif type == 'twitter' %}
                                                <title>X (Twitter)</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm4.3 7.1c-.8.4-1.6.7-2.5.8.9-.5 1.6-1.4 1.9-2.4-.8.4-1.7.7-2.6.9-.8-.9-1.9-1.5-3.1-1.5-2.4 0-4.3 1.9-4.3 4.3 0 .3.04.7.1 1-.3.04-6.3-3.2-8.3-7.5-.4.7-.6 1.5-.6 2.4 0 1.5.8 2.8 2 3.6-.7 0-1.4-.2-2-.5v.05c0 2.2 1.6 4 3.7 4.4-.4.1-.9.1-1.3.04.6 2 2.3 3.4 4.3 3.4-1.6 1.2-3.6 1.9-5.8 1.9-.4 0-.8 0-1.2-.1 2.2 1.4 4.8 2.2 7.5 2.2 9 0 14-7.5 14-14 0-.2 0-.4-.01-.6.9-.6 1.7-1.3 2.3-2.2z"/>
                                            {% elif type == 'email' %}
                                                <title>Email</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm0 14l-7-5V7l7 5 7-5v2l-7 5z"/>
                                            {% elif type == 'website' %}
                                                <title>Website</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm-1.812 7.188a4.188 4.188 0 0 0-5.925 0 4.188 4.188 0 0 0 0 5.925l2.094 2.094a1 1 0 1 0 1.414-1.414l-2.094-2.094a2.188 2.188 0 0 1 3.097-3.097l1.097 1.097a1 1 0 1 0 1.414-1.414l-1.097-1.097zM18.812 7.188a1 1 0 1 0-1.414 1.414l2.094 2.094a2.188 2.188 0 0 1-3.097 3.097l-1.097-1.097a1 1 0 1 0-1.414 1.414l1.097 1.097a4.188 4.188 0 0 0 5.925 0 4.188 4.188 0 0 0 0-5.925z"/>
                                            {% else %}
                                                <title>Link</title>
                                                <path d="M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm-1.812 7.188a4.188 4.188 0 0 0-5.925 0 4.188 4.188 0 0 0 0 5.925l2.094 2.094a1 1 0 1 0 1.414-1.414l-2.094-2.094a2.188 2.188 0 0 1 3.097-3.097l1.097 1.097a1 1 0 1 0 1.414-1.414l-1.097-1.097zM18.812 7.188a1 1 0 1 0-1.414 1.414l2.094 2.094a2.188 2.188 0 0 1-3.097 3.097l-1.097-1.097a1 1 0 1 0-1.414 1.414l1.097 1.097a4.188 4.188 0 0 0 5.925 0 4.188 4.188 0 0 0 0-5.925z"/>
                                            {% endif %}
                                        </svg>
                                        {% endwith %}
                                    </a>
                                {% endfor %}
                            </div>
                        </li>
                        {% empty %}
                        <p class="text-center text-gray-500">The Wall of Dreamers is currently being updated! Check back soon to see who we're supporting.</p>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}