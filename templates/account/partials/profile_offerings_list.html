<div class="space-y-6">
    <!-- Active Enrollments -->
    {% if user_offerings %}
        <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
            {% for enrollment in user_offerings %}
            <div class="bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 flex flex-col">
                <div class="p-5 flex-grow">
                    <div class="flex justify-between items-start">
                        <h3 class="text-lg font-bold text-gray-900">{{ enrollment.offering.name }}</h3>
                        {% if enrollment.is_active %}
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                Active
                            </span>
                        {% else %}
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                Completed
                            </span>
                        {% endif %}
                    </div>
                    
                    <p class="text-sm text-gray-500 mt-1">Coach: <span class="font-medium text-gray-900">{{ enrollment.coach.user.get_full_name }}</span></p>
                    <p class="text-xs text-gray-400 mt-1">Enrolled: {{ enrollment.enrolled_on|date:"M d, Y" }}</p>

                    <div class="mt-4">
                        <div class="flex justify-between text-sm font-medium text-gray-900 mb-1">
                            <span>Progress</span>
                            <span>{{ enrollment.remaining_sessions }} / {{ enrollment.total_sessions }} sessions left</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5">
                            <!-- Calculate percentage: (Total - Remaining) / Total * 100 -->
                            <div class="bg-indigo-600 h-2.5 rounded-full" style="width: {% widthratio enrollment.total_sessions|add:'-1'|add:enrollment.remaining_sessions|stringformat:'s'|add:'-1'|add:enrollment.total_sessions enrollment.total_sessions 100 %}%"></div> 
                            <!-- Note: Simple width calculation logic for template -->
                        </div>
                    </div>
                </div>

                <div class="bg-gray-50 px-5 py-3 border-t border-gray-200 rounded-b-lg flex justify-between items-center">
                    {% if enrollment.is_active and enrollment.remaining_sessions > 0 %}
                        <a href="{% url 'coaching_booking:profile_book_session' %}?enrollment_id={{ enrollment.id }}" class="text-sm font-medium text-indigo-600 hover:text-indigo-500">
                            Book Session &rarr;
                        </a>
                    {% elif enrollment.is_complete %}
                        {% if not enrollment.has_review %}
                            <a href="{% url 'coaching_booking:submit_coach_review' enrollment.id %}" class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-yellow-500 hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 shadow-sm">
                                ‚≠ê Leave Review
                            </a>
                        {% else %}
                            <span class="text-sm text-gray-500 italic">Review Submitted</span>
                        {% endif %}
                    {% else %}
                        <span class="text-sm text-gray-400">Program Ended</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300">
            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
            <h3 class="mt-2 text-sm font-medium text-gray-900">No enrollments found</h3>
            <p class="mt-1 text-sm text-gray-500">Get started by choosing a coaching package.</p>
            <div class="mt-6">
                <a href="{% url 'coaching_booking:offer-list' %}" class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                    View Offerings
                </a>
            </div>
        </div>
    {% endif %}

    <!-- Taster Sessions Section -->
    {% if free_offers %}
    <div class="mt-8">
        <h3 class="text-lg font-medium leading-6 text-gray-900 mb-4">Taster Sessions</h3>
        <div class="bg-white shadow overflow-hidden sm:rounded-md">
            <ul class="divide-y divide-gray-200">
                {% for offer in free_offers %}
                    {% include "account/partials/_free_offer_row.html" with offer=offer %}
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}
</div>