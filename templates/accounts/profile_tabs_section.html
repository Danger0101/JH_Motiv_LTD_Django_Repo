{% load accounts_tags %}
<div class="mt-12" id="profile-tabs-section">
    <div class="border-b border-gray-200">
        <ul class="-mb-px flex space-x-8" aria-label="Tabs" role="tablist">
            <li>
                <a hx-get="{% url 'accounts:profile_offerings' %}" hx-target="#profile-content" hx-swap="innerHTML"
                   class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm {% if active_tab == 'offerings' %}border-indigo-500 text-indigo-600{% else %}border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300{% endif %}"
                   aria-current="{% if active_tab == 'offerings' %}page{% else %}false{% endif %}"
                   role="tab"
                   aria-controls="profile-offerings-panel"
                   id="profile-offerings-tab">
                    My Coaching Offerings
                </a>
            </li>
            <li>
                <a hx-get="{% url 'accounts:profile_bookings' %}" hx-target="#profile-content" hx-swap="innerHTML"
                   class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm {% if active_tab == 'bookings' %}border-indigo-500 text-indigo-600{% else %}border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300{% endif %}"
                   aria-current="{% if active_tab == 'bookings' %}page{% else %}false{% endif %}"
                   role="tab"
                   aria-controls="profile-bookings-panel"
                   id="profile-bookings-tab">
                    My Bookings
                </a>
            </li>
            <li>
                <a hx-get="{% url 'coaching_booking:profile_book_session' %}" hx-target="#profile-content" hx-swap="innerHTML"
                   class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm {% if active_tab == 'book_session' %}border-indigo-500 text-indigo-600{% else %}border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300{% endif %}"
                   aria-current="{% if active_tab == 'book_session' %}page{% else %}false{% endif %}"
                   role="tab"
                   aria-controls="profile-book-session-panel"
                   id="profile-book-session-tab">
                    Book a Session
                </a>
            </li>
            {% if request.user.is_staff or request.user.is_coach %}
            <li>
                <a hx-get="{% url 'accounts:profile_taster_requests' %}" hx-target="#profile-content" hx-swap="innerHTML"
                   class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm {% if active_tab == 'taster_requests' %}border-indigo-500 text-indigo-600{% else %}border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300{% endif %}"
                   aria-current="{% if active_tab == 'taster_requests' %}page{% else %}false{% endif %}"
                   role="tab"
                   aria-controls="profile-taster-requests-panel"
                   id="profile-taster-requests-tab">
                    Taster Requests
                    {% with pending_count=request.user|pending_taster_count %}
                        {% if pending_count > 0 %}
                            <span class="ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full">{{ pending_count }}</span>
                        {% endif %}
                    {% endwith %}
                </a>
            </li>
            {% endif %}
        </ul>
    </div>

    <div id="profile-content" class="mt-8"
         role="tabpanel"
         aria-labelledby="profile-{{ active_tab }}-tab">
        {% if active_tab == 'offerings' %}
            {% include 'accounts/profile_offerings.html' %}
        {% elif active_tab == 'bookings' %}
            {% include 'accounts/profile_bookings.html' %}
        {% elif active_tab == 'book_session' %}
            {% include 'coaching_booking/profile_book_session.html' %}
        {% elif active_tab == 'taster_requests' %}
            {% include 'accounts/partials/_taster_requests_list.html' %}
        {% endif %}
    </div>
</div>