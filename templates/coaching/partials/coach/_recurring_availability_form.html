<div x-data="scheduleEditor('{{ schedule_data|escapejs }}')" autocomplete="off">
    <div class="space-y-4">
        <template x-for="(day, dayIndex) in schedule" :key="dayIndex">
            <div class="p-3 border rounded-lg bg-white shadow-sm">
                <div class="flex justify-between items-center">
                    <h4 class="font-bold text-gray-800" x-text="day.name"></h4>
                    <button @click="addSlot(dayIndex)" class="text-sm font-semibold text-indigo-600 hover:text-indigo-800">+ Add Time</button>
                </div>
                <div class="mt-2 space-y-2">
                    <template x-if="day.slots.length === 0">
                        <p class="text-xs text-gray-500 italic">Unavailable</p>
                    </template>
                    <template x-for="(slot, slotIndex) in day.slots" :key="slotIndex">
                        <div class="flex items-center space-x-2">
                            <input type="time" x-model="slot.start" class="p-1 border rounded w-full text-sm">
                            <span class="text-gray-500">-</span>
                            <input type="time" x-model="slot.end" class="p-1 border rounded w-full text-sm">
                            <button @click="removeSlot(dayIndex, slotIndex)" class="text-red-500 hover:text-red-700 font-bold text-lg">&times;</button>
                        </div>
                    </template>
                </div>
            </div>
        </template>
    </div>

    <button @click="saveSchedule()" class="mt-4 w-full bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700 transition" :disabled="isSaving">
        <span x-show="!isSaving">Save Weekly Schedule</span>
        <span x-show="isSaving">Saving...</span>
    </button>
    <p x-show="message" x-text="message" class="text-sm mt-2 text-center" :class="isError ? 'text-red-600' : 'text-green-600'"></p>
</div>
