{% for item in cart.items.all %}
<div class="cart-item" role="listitem" aria-labelledby="product-name-{{ item.id }}">
    
    <div class="item-thumb">
        <img src="{{ item.variant.get_image_url }}" alt="{{ item.variant.product.name }}">
    </div>

    <div class="item-info" id="product-name-{{ item.id }}">
        <h3 class="item-name">{{ item.variant.product.name }}</h3>
        <p class="item-variant">{{ item.variant.name }}</p>
    </div>

    <div class="item-controls">
        <label for="quantity-{{ item.id }}" class="sr-only">Quantity for {{ item.variant.product.name }}</label>
        <input type="number" 
               id="quantity-{{ item.id }}"
               value="{{ item.quantity }}" 
               min="0" 
               class="qty-input"
               hx-post="{% url 'cart:update_cart_item' item.id %}"
               hx-target="#cart-item-list" 
               hx-swap="innerHTML"
               hx-trigger="change delay:100ms"
               name="quantity"
               aria-controls="cart-item-list">
               
        <div class="item-price">
            <h4>Â£{{ item.get_total_price|floatformat:2 }}</h4>
        </div>

        <a href="#" 
           class="btn-remove"
           hx-post="{% url 'cart:update_cart_item' item.id %}"
           hx-target="#cart-item-list"
           hx-swap="innerHTML"
           hx-vals='{"quantity": 0}'
           aria-label="Remove item {{ item.variant.product.name }}">
             <svg xmlns="http://www.w3.org/2000/svg" style="width: 1.25rem; height: 1.25rem;" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 7a1 1 0 012 0v8a1 1 0 11-2 0V7zm4 0a1 1 0 10-2 0v8a1 1 0 102 0V7z" clip-rule="evenodd" /></svg>
        </a>
    </div>
</div>
{% empty %}
<div class="text-center py-10" style="padding: 2.5rem 0; text-align: center;">
    <svg xmlns="http://www.w3.org/2000/svg" style="margin: 0 auto; width: 3rem; height: 3rem; color: #9ca3af;" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
    <h3 style="margin-top: 0.5rem; font-size: 1.25rem; font-weight: 500; color: #111827;">Your cart is empty</h3>
    <p style="margin-top: 0.25rem; font-size: 0.875rem; color: #6b7280;">Add products to get started.</p>
    <div style="margin-top: 1.5rem;">
        <a href="{% url 'products:product_list' %}" style="display: inline-flex; align-items: center; padding: 0.5rem 1rem; border: 1px solid transparent; font-size: 0.875rem; font-weight: 500; border-radius: 0.375rem; color: white; background-color: #2563eb; transition: background-color 0.15s ease-in-out;">
            Continue Shopping
        </a>
    </div>
</div>
{% endfor %}