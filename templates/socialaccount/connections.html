{% load i18n allauth socialaccount %}

{# 1. Determine inheritance based on HTMX. 'base_template' must be passed from the view. #}
{% extends base_template %}

{% block title %}{% trans "Account Connections" %}{% endblock %}

{% block content %}
<div class="max-w-md mx-auto py-8 px-4 sm:px-6 lg:px-8">
    <div class="p-6 bg-white shadow-lg rounded-lg border">
        <h2 class="text-2xl font-bold mb-6 text-gray-900">{% translate "Account Connections" %}</h2>
{% endif %}

        {% if form.accounts %}
        <p class="text-gray-700 mb-4">
            {% blocktrans %}You are currently connected to the following social networks:{% endblocktrans %}
        </p>

        <form method="post" action="{% url 'socialaccount_connections' %}" class="space-y-4">
            {% csrf_token %}
            <fieldset class="space-y-2">
                {% for account in form.accounts %}
                <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                    <input id="id_account_{{ forloop.counter }}" type="checkbox" name="account" value="{{ account.id }}" class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                    <label for="id_account_{{ forloop.counter }}" class="ml-3 text-sm font-medium text-gray-700 flex-1">
                        {{ account.get_provider.name }}: {{ account }}
                    </label>
                </div>
                {% endfor %}
                <button type="submit" name="action_remove" class="w-full py-2 px-4 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">{% trans "Remove Selected Connections" %}</button>
            </fieldset>
        </form>

        {% else %}
        <p class="text-gray-500">{% trans "You are not connected to any social network accounts." %}</p>
        {% endif %}

        <h3 class="text-xl font-bold text-gray-800 mb-4 mt-6">{% trans "Add a 3rd Party Account" %}</h3>

        <ul class="socialaccount_providers space-y-3">
            {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
        </ul>

{% endblock %}