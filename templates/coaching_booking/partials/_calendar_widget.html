<div class="bg-white rounded-lg shadow overflow-hidden w-full">
    <div class="flex items-center justify-between px-6 py-4 bg-gray-50 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900">
            {{ current_date|date:"F Y" }}
        </h3>
        <div class="flex space-x-2">
            <button 
                hx-get="{% url 'coaching_booking:get_booking_calendar' %}?year={{ prev_year }}&month={{ prev_month }}{% if enrollment_id %}&enrollment_id={{ enrollment_id }}{% endif %}{% if reschedule_booking_id %}&reschedule_booking_id={{ reschedule_booking_id }}{% endif %}{% if coach %}&coach_id={{ coach.id }}{% endif %}&slot_target_id={{ slot_target_id|urlencode }}"
                hx-target="closest div[id^='calendar-container-']"
                class="p-2 rounded-full hover:bg-gray-200 text-gray-600 transition {% if disable_prev %}opacity-50 cursor-not-allowed{% endif %}"
                {% if disable_prev %}disabled{% endif %}>
                &larr;
            </button>
            
            <button 
                hx-get="{% url 'coaching_booking:get_booking_calendar' %}?year={{ next_year }}&month={{ next_month }}{% if enrollment_id %}&enrollment_id={{ enrollment_id }}{% endif %}{% if reschedule_booking_id %}&reschedule_booking_id={{ reschedule_booking_id }}{% endif %}{% if coach %}&coach_id={{ coach.id }}{% endif %}&slot_target_id={{ slot_target_id|urlencode }}"
                hx-target="closest div[id^='calendar-container-']"
                class="p-2 rounded-full hover:bg-gray-200 text-gray-600 transition">
                &rarr;
            </button>
        </div>
    </div>

    <div class="grid grid-cols-7 border-b border-gray-200 bg-gray-100 text-xs font-semibold text-gray-500 uppercase tracking-wide text-center">
        <div class="py-2">Mon</div><div class="py-2">Tue</div><div class="py-2">Wed</div>
        <div class="py-2">Thu</div><div class="py-2">Fri</div><div class="py-2">Sat</div>
        <div class="py-2">Sun</div>
    </div>
    
    <div class="grid grid-cols-7 text-sm w-full">
        {# Iterate through the weeks and then the days #}
        {% for week in calendar_rows %}
            {% for day in week %}
                <div class="relative h-20 border-b border-r border-gray-100 p-1 transition-colors duration-150
                            {{ day.css_class }}
                            {% if not day.is_current_month %}opacity-40 grayscale{% endif %}"
                     title="{{ day.tooltip }}"
                     {% if day.has_available %}
                     hx-get="{% url 'coaching_booking:get_daily_slots' %}?date={{ day.date|date:'Y-m-d' }}{% if enrollment_id %}&enrollment_id={{ enrollment_id }}{% endif %}{% if reschedule_booking_id %}&reschedule_booking_id={{ reschedule_booking_id }}{% endif %}&coach_id={{ coach.id }}"
                     hx-target="{{ slot_target_id }}"
                     {% endif %}>
                    
                    <span class="block text-right pr-2 text-xs font-medium">{{ day.number }}</span>
                    
                    <div class="absolute bottom-2 right-2 flex space-x-1">
                        {% if day.has_available %}
                            <span class="inline-block h-2 w-2 rounded-full bg-green-600 ring-2 ring-white" title="Slots Available"></span>
                        {% elif day.is_fully_booked %}
                            <span class="inline-block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white" title="Fully Booked"></span>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
</div>