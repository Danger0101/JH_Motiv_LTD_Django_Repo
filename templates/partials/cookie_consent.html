{% if not request.COOKIES.user_consent %}
<section 
    aria-label="Cookie Consent Banner"
    role="region"
    x-data="{ consent: localStorage.getItem('user_consent') }"
    x-show="consent === null"
    x-init="$watch('consent', value => localStorage.setItem('user_consent', value))"
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0 transform translate-y-4"
    x-transition:enter-end="opacity-100 transform translate-y-0"
    x-transition:leave="transition ease-in duration-300"
    x-transition:leave-start="opacity-100 transform translate-y-0"
    x-transition:leave-end="opacity-0 transform translate-y-4"
    class="fixed bottom-0 left-0 p-4 z-50 max-w-sm rounded-lg shadow-2xl bg-gray-800 text-white m-4"
    x-cloak
>
    <div class="flex flex-col space-y-3">
        <p class="text-sm font-medium">
            We use cookies to enhance your experience and analyze site traffic. By clicking 'Accept', you agree to our policies.
        </p>
        
        <div class="flex space-x-2">
            <button 
                @click="consent = 'accepted'"
                hx-post="{% url 'core:set_cookie_consent' %}"
                hx-vals='{"consent_value": "accepted"}'
                hx-swap="none"
                class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out"
            >
                Accept
            </button>
            
            <button 
                @click="consent = 'rejected'"
                hx-post="{% url 'core:set_cookie_consent' %}"
                hx-vals='{"consent_value": "rejected"}'
                hx-swap="none"
                class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded transition duration-150 ease-in-out"
            >
                Reject
            </button>
        </div>
        
        <a href="{% url 'core:privacy_policy' %}" class="text-sm text-gray-400 hover:text-gray-300 underline" role="link">
            Read our Privacy Policy
        </a>
    </div>
</section>
{% endif %}
