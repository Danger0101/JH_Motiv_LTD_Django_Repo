<div class="space-y-3">
    {% if coach_clients_page.object_list %}
        {% for enrollment in coach_clients_page.object_list %}
            <div class="p-3 bg-white border border-gray-100 rounded-lg shadow-sm">
                <div class="flex justify-between items-start">
                    <div>
                        <h4 class="text-sm font-bold text-gray-900">{{ enrollment.client.get_full_name|default:enrollment.client.username }}</h4>
                        <p class="text-xs text-gray-500 mt-0.5">{{ enrollment.offering.name }}</p>
                    </div>
                    <div class="text-right">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                            {% if enrollment.is_active %}
                                {% if enrollment.remaining_sessions > 1 %}bg-blue-100 text-blue-800{% else %}bg-yellow-100 text-yellow-800{% endif %}
                            {% else %}
                                bg-gray-100 text-gray-800
                            {% endif %}">
                            {% if enrollment.is_active %}
                                {{ enrollment.remaining_sessions }} left
                            {% else %}
                                Inactive
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="mt-2 text-xs text-gray-400">
                    Enrolled: {{ enrollment.enrolled_on|date:"M d, Y" }}
                    {% if not enrollment.is_active and enrollment.deactivated_on %}
                        <br>Deactivated: {{ enrollment.deactivated_on|date:"M d, Y" }}
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p class="text-sm text-gray-500 italic">No active clients assigned yet.</p>
    {% endif %}
</div>

{% if coach_clients_page.has_other_pages %}
    <nav class="mt-4 flex justify-center items-center space-x-2" aria-label="Pagination">
        {% if coach_clients_page.has_previous %}
            <button hx-get="{% url 'accounts:coach_clients_partial' %}?page={{ coach_clients_page.previous_page_number }}" 
                    hx-target="#coach-clients-list" hx-swap="innerHTML"
                    class="px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                Previous
            </button>
        {% else %}
            <span class="px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-400 bg-white cursor-not-allowed">
                Previous
            </span>
        {% endif %}

        {% for i in coach_clients_page.paginator.page_range %}
            {% if coach_clients_page.number == i %}
                <span class="px-3 py-1 rounded-md border border-indigo-500 text-sm font-medium text-indigo-700 bg-indigo-50">
                    {{ i }}
                </span>
            {% else %}
                <button hx-get="{% url 'accounts:coach_clients_partial' %}?page={{ i }}" 
                        hx-target="#coach-clients-list" hx-swap="innerHTML"
                        class="px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                    {{ i }}
                </button>
            {% endif %}
        {% endfor %}

        {% if coach_clients_page.has_next %}
            <button hx-get="{% url 'accounts:coach_clients_partial' %}?page={{ coach_clients_page.next_page_number }}" 
                    hx-target="#coach-clients-list" hx-swap="innerHTML"
                    class="px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                Next
            </button>
        {% else %}
            <span class="px-3 py-1 rounded-md border border-gray-300 text-sm font-medium text-gray-400 bg-white cursor-not-allowed">
                Next
            </span>
        {% endif %}
    </nav>
{% endif %}