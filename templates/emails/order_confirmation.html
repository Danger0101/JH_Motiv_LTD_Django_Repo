{% extends "emails/base_email.html" %}

{% block title %}Order Confirmation #{{ order.id }}{% endblock %}

{% block content %}
    <h1>Thank You for Your Order!</h1>
    
    <p>Hi {{ order.user.first_name|default:order.user.username }},</p>
    <p>We have received your order <strong>#{{ order.id }}</strong>.</p>

    <div class="info-box">
        <strong>Order Date:</strong> {{ order.created_at|date:"F j, Y" }}<br>
        <strong>Status:</strong> {{ order.get_status_display }}
    </div>

    <h2>Order Summary</h2>
    <table class="data-table">
        <thead>
            <tr>
                <th>Item</th>
                <th style="text-align: right;">Price</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order.items.all %}
            <tr>
                <td>
                    <strong>{{ item.product_name }}</strong><br>
                    <span style="font-size: 12px; color: #6b7280;">{{ item.variant_name }} x {{ item.quantity }}</span>
                </td>
                <td style="text-align: right;">£{{ item.total_price }}</td>
            </tr>
            {% endfor %}
            <tr class="total-row">
                <td>Total</td>
                <td style="text-align: right;">£{{ order.total_paid }}</td>
            </tr>
        </tbody>
    </table>
    
    <div style="text-align: center;">
        <a href="{{ order_url }}" class="btn">View Your Order</a>
    </div>
{% endblock %}
