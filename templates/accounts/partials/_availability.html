<div id="availability-section">
    <form method="POST" hx-post="{% url 'coaching_availability:profile_availability' %}" hx-target="#availability-section" hx-swap="outerHTML">
        {% csrf_token %}
        
        {{ weekly_schedule_formset.management_form }}

        <div class="space-y-4">
            {% for day_code, day_name in days_of_week %}
                <div class="border rounded-lg shadow-sm p-4 mb-4 bg-gray-50">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">{{ day_name }}</h3>
                    {% for form in weekly_schedule_formset %}
                        {% if form.instance.day_of_week == day_code %}
                            <div class="flex items-center justify-between p-3 mb-2 bg-white border rounded-lg">
                                {{ form.id }}
                                {{ form.day_of_week.as_hidden }}

                                <div class="flex space-x-2 items-center">
                                    <div class="flex flex-col">
                                        <label for="{{ form.start_time.id_for_label }}" class="text-xs text-gray-500">Start</label>
                                        {{ form.start_time }} 
                                    </div>
                                    <div class="flex flex-col">
                                        <label for="{{ form.end_time.id_for_label }}" class="text-xs text-gray-500">End</label>
                                        {{ form.end_time }}
                                    </div>
                                </div>
                                <button type="submit" name="delete_slot" value="{{ form.instance.pk }}" class="text-red-500 hover:text-red-700 p-2">
                                    <i class="fas fa-trash-alt"></i> <!-- FontAwesome trash icon -->
                                </button>

                                {% if form.errors %}
                                    <div class="text-red-500 text-sm">
                                        {{ form.errors }}
                                    </div>
                                {% endif %}
                            </div>
                        {% endif %}
                    {% endfor %}
                    <button type="submit" name="add_slot_for_day" value="{{ day_code }}" class="mt-2 px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 transition text-sm">
                        + Add Split Time
                    </button>
                </div>
            {% endfor %}
        </div>

        <div class="mt-6">
            <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition">
                Update Weekly Schedule
            </button>
        </div>
    </form>
</div>