{% extends "emails/base_email.html" %}
{% load humanize %}

{% block content %}
<p>Hi {{ user.first_name|default:"Customer" }},</p>

<p>Thank you for your order! We've received it and are getting it ready for shipment. You'll receive another email once your order has shipped.</p>

<p><strong>Order Summary (Order #{{ order.id }}):</strong></p>

<table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
    <thead>
        <tr>
            <th style="text-align: left; padding: 8px; border-bottom: 1px solid #ddd;">Product</th>
            <th style="text-align: right; padding: 8px; border-bottom: 1px solid #ddd;">Quantity</th>
            <th style="text-align: right; padding: 8px; border-bottom: 1px solid #ddd;">Price</th>
        </tr>
    </thead>
    <tbody>
        {% for item in order.items.all %}
        <tr>
            <td style="padding: 8px; border-bottom: 1px solid #ddd;">
                {{ item.variant.product.name }}
                <br>
                <small style="color: #777;">{{ item.variant.name }}</small>
            </td>
            <td style="text-align: right; padding: 8px; border-bottom: 1px solid #ddd;">{{ item.quantity }}</td>
            <td style="text-align: right; padding: 8px; border-bottom: 1px solid #ddd;">£{{ item.price|floatformat:2|intcomma }}</td>
        </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr>
            <td colspan="2" style="text-align: right; padding: 8px; font-weight: bold;">Total Paid</td>
            <td style="text-align: right; padding: 8px; font-weight: bold;">£{{ order.total_paid|floatformat:2|intcomma }}</td>
        </tr>
    </tfoot>
</table>

<p>You can view your order details by visiting your account dashboard.</p>

<p>
    <a href="{{ dashboard_url }}" class="button">View Your Orders</a>
</p>

<p>Thanks again for your purchase!</p>

<p>Best regards,<br>The {{ site_name }} Team</p>
{% endblock %}
