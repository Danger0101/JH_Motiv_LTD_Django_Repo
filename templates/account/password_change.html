
{% load i18n allauth %}

{% block title %}{% translate "Change Password" %}{% endblock %}

{% block content %}
    <div class="{% if not request.htmx %}max-w-md mx-auto py-8 px-4 sm:px-6 lg:px-8{% endif %}">
        <div class="{% if not request.htmx %}p-6 bg-white shadow-lg rounded-lg border{% endif %}">

            <form method="post" action="{% url 'accounts:password_change' %}">
                {% csrf_token %}
                {% if form.non_field_errors %}
                    <div style="padding: 0.75rem; margin-bottom: 1rem; font-size: 0.875rem; color: #b91c1c; background-color: #fee2e2; border-radius: 0.25rem;" role="alert">
                        {% for error in form.non_field_errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endif %}

                {% for field in form %}
                    <div class="form-group">
                        <label for="{{ field.id_for_label }}" class="form-label">
                            {{ field.label }}
                        </label>
                        {{ field.as_widget }}
                        {% if field.errors %}
                            <p style="margin-top: 0.25rem; font-size: 0.75rem; color: #ef4444;">{{ field.errors|striptags }}</p>
                        {% endif %}
                    </div>
                {% endfor %}
                
                <div style="margin-top: 1.5rem;">
                    <button type="submit" name="action" value="change" class="btn-primary">
                        {% translate "Change Password" %}
                    </button>
                </div>
                
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="{% url 'account_reset_password' %}" class="auth-link" style="font-size: 0.875rem;">{% translate "Forgot Password?" %}</a>
                </div>
            </form>

        </div>
    </div>
{% endblock %}
