<form hx-post="{% url 'coaching_booking:reschedule_session' booking.id %}" hx-target="#reschedule-errors" hx-swap="innerHTML" class="space-y-4">
    {% csrf_token %}
    <input type="hidden" name="new_start_time" value="{{ new_start_time_iso }}">
    
    <div>
        <h3 class="text-lg font-bold text-gray-900">Confirm Reschedule</h3>
        <p class="text-sm text-gray-500">
            Reschedule session to: <strong>{{ new_start_time|date:"F d, Y at g:i A" }}</strong>?
        </p>
    </div>
<div class="fixed inset-0 z-[60] overflow-y-auto bg-gray-900 bg-opacity-50 flex items-center justify-center p-4" x-data>
    <div class="bg-white rounded-xl shadow-2xl w-full max-w-md p-6 relative" @click.away="$el.remove()">
        <button @click="$el.closest('.fixed').remove()" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">âœ•</button>
        
        <h2 class="text-xl font-bold mb-4 text-gray-900">Confirm Reschedule</h2>
        
        <div class="mb-6 space-y-3">
            <div class="bg-blue-50 p-3 rounded-lg border border-blue-100">
                <p class="text-xs text-blue-600 font-bold uppercase tracking-wide mb-1">New Time</p>
                <p class="text-lg font-bold text-gray-900">{{ new_start_time|date:"l, F jS" }}</p>
                <p class="text-md text-gray-700">{{ new_start_time|date:"g:i A" }}</p>
            </div>
            
            {% if new_coach != booking.coach %}
            <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-100">
                <p class="text-xs text-yellow-600 font-bold uppercase tracking-wide mb-1">New Coach</p>
                <p class="text-md font-bold text-gray-900">{{ new_coach.user.get_full_name }}</p>
            </div>
            {% endif %}
        </div>

    <div id="reschedule-errors"></div>

    <div class="flex justify-end gap-3 pt-4">
        <button type="button" @click="rescheduleModalOpen = false" class="px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Cancel</button>
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">Confirm Change</button>
        <form hx-post="{% url 'coaching_booking:reschedule_session' booking.id %}" hx-target="#reschedule-content">
            {% csrf_token %}
            <input type="hidden" name="new_start_time" value="{{ new_start_time_iso }}">
            <input type="hidden" name="coach_id" value="{{ new_coach.id }}">
            
            <button type="submit" class="w-full py-3 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition shadow-md">Confirm Change</button>
        </form>
    </div>
</form>

<script>
    // No specific script needed here as the main profile page handles the modal state via Alpine.js
</script>
</div>